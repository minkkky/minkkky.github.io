---
layout: post
title:  "[웹소설] 일타강사 AI의 기막힌 추천"
info: "머신러닝 추천 시스템"
tech: "python, django, MeCab, Doc2Vec"
type: 내일배움캠프
---

![logo](https://camo.githubusercontent.com/94b1c3641c1dbabac16cfff75bd7604185177535669be244ef38db5b904acdeb/68747470733a2f2f696d67312e6461756d63646e2e6e65742f7468756d622f523132383078302f3f73636f64653d6d746973746f72793226666e616d653d6874747073253341253246253246626c6f672e6b616b616f63646e2e6e6574253246646e25324663525a7957772532466274724a326e6256304c79253246563074684c36744e6a4a4b6e6b5072487369596c4a4b253246696d672e706e67)

<br/>

# [웹소설] 일타강사 AI의 기막힌 추천 :웹타추
---
네이버 시리즈에서 판매중인 웹소설 작품의 작품정보를 크롤링하여 얻은 줄거리를 `자연어 처리`를 이용해 웹소설의 스토리를 `벡터 임베딩`하여 사용자가 선호한 소설의 줄거리와 유사도가 높은 작품을 `추천`해주는 서비스

[`🔗시연영상`](https://tv.kakao.com/v/429567788)  

## 주요 기능
1. JWT를 이용한 로그인
1. 네이버 시리즈에서 판매중인 웹소설 작품의 작품정보를 Selenium을 이용하여 크롤링
1. 자연어 처리를 이용해 웹소설의 스토리를 벡터 임베딩
1. 사용자가 좋아한 작품의 줄거리와 유사도가 높은 작품을 추천
    * 등록된 선호작이 없다면 별점이 높은 작품들을 추천
1. 작품에 대한 리뷰 CRUD 기능
1. 리뷰를 분석하여 가장 많은 키워드 5개 표시 (작품 상세 페이지)
1. 좋아한 작품의 스토리 키워드 빈도수 상위 10개 표시 (마이 페이지)

<br/>

# Project
---
* [`🔗Github`](https://github.com/cmjcum/webtachu)
* [`🔗Starting Assignment (tistory)`](https://cold-charcoal.tistory.com/85)

## 프로젝트 기간
2022-06-02 ~ 2022-06-13

<br/>

## 팀 구성 및 역할

| 이름 | 역할 | 깃허브 |
|:----------|:----------|:----------:|
| **이정아&nbsp;&nbsp;&nbsp;&nbsp;** | - | [`🔗zeonga1102`](https://github.com/zeonga1102)|
| **노을🌱** | 로그인/회원가입, 마이 페이지, 로고 제작 | [`🔗minkkky`](https://github.com/minkkky) |
| **이현경** | -&nbsp;&nbsp;&nbsp;&nbsp; | [`🔗LULULALA2`](https://github.com/LULULALA2)|
| **김동근** | - | [`🔗yinmsk`](https://github.com/yinmsk) |

* 모델제작 - 팀 전체 참여

<br/>

## 스킬 및 사용툴
`Python`, `Django`

<br/>

## 나의 역할

### 회원가입/로그인 페이지 백엔드

### 회원가입/로그인 페이지 프론트엔드

### 마이 페이지의 백엔드  
1. `Goal` 해당 이용자가 작성한 일기를 월별로 불러오기
1. 가장 최근에 글을 쓴 달부터 글을 표시하기 위해서 데이터를 DB에서 불러올 때 내림차순으로 sort하여 가져왔다.
```python
posts = list(db.posts.find({"email": payload['email']}).sort('date', -1))
```
1. `Problem` 월별로 데이터를 구분하여 출력할 수 없었다.
1. `Action`  for문과 try문을 이용하여 데이터를 월별로 묶어주었다.
    ```python
    temp = {}
    for post in posts:
        try:
            temp[post['date'].strftime('%Y %B')].append(post)
        except: # 작성된 글이 없을 때
            temp[post['date'].strftime('%Y %B')] = [post]

    return render_template('index.html', temp=temp)
    ```
1. `Problem` 월별로 내림차순 정렬된 것은 좋았으나, 일별로도 내림차순 정렬되어 원하는 형태가 아니었다.
1. `Action`   date에서 년월/날짜 값을 뽑아낸 후 sort()를 이용하여 년월 값으로는 내림차순 정렬을 하고, 날짜 값으로는 오름차순 정렬을 하는 `다중조건`으로 정렬하여 해결했다.
    ```python
    posts = list(db.posts.find({"email": payload['email']}))

    for post in posts:
        post['Y-M'] = post['date'].strftime('%Y%m') # 'Y-M': yyyymm
        post['day'] = post['date'].strftime('%d') # 'day': dd

    posts.sort(key=lambda x: (-int(x['Y-M']), x['day']))
    ```

### 마이 페이지의 프론트엔드
1. `Goal` jinja2 문법을 사용하여 데이터 출력하기
1. `Problem` 서버에서 받아온 데이터는 딕셔너리와 리스트가 복합된 형태로, key값과 item값을 둘 다 사용하는 방법을 몰랐다.
1. `Action` for문과 `items()` 함수를 사용하여 출력했다.
    {%  raw %}
    ```html
    {% for key, value in temp.items() %}
    <div class="list">
        <h5><span class="deco">{{ key }}<span class="small">  (젤리 {{ value | length }}개)</span></span></h5>
        <div class="jelly_box">
            {% for val in value %}
                <span data_tooltip="{{ val.date.strftime('%d %a') }}">
                    <a href={{url_for('detail.show_detail', post_id=val._id)}}>
                        <div class="jelly"><img src={{val.emoji}}></div>
                    </a>
                </span>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
    ```
    {% endraw %}

<br/>

## 회고
>기획 단계에서 브레인스토밍으로 나온 아이디어들을 잘 활용해서 하나의 서비스로 구상한 것을 생각했던 대로 기획안과 컨셉에 맞춰서 충실하게 디자인과 기능을 구현해서 아주 만족스럽다.  

>머신러닝 모델 제작 부분은 전처리부터 모델 학습시키는 것까지 팀원 전부가 참여한 점과 이 과정을 직접 경험해본 점도 좋았다.  

>머신러닝 모델을 학습시키는 데에서 그치지 않고 실제로 활용하여 하나의 앱에 자연스럽게 녹인 것도 좋았다. 실제로 서비스해도 될 정도의 퀄리티로 완성되어 호평을 받아 흐뭇하다.