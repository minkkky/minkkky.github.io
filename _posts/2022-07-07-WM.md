---
layout: post
title:  "🚀Make Migrations"
info: "최종 프로젝트"
tech: "python, django, DRF, deepfake, docker, AWS, git actions"
type: 내일배움캠프
---

![logo](https://user-images.githubusercontent.com/71905164/182584327-171cf850-0bd8-4d62-bdec-1ba090eb9b71.png)

<br/>

# Make Migrations :WM
---
딥페이크를 이용한 움직이는 사진이 들어간 시민증을 제작해주며, 마이룸 꾸미기 기능을 제공하는 커뮤니티 사이트

[`🔗시연영상 (피드백 반영 전)`](https://tv.kakao.com/v/430933218)  
[`🔗시연영상 (피드백 반영 후)`](https://tv.kakao.com/v/431224675)  

## 주요 기능
* JWT를 이용한 로그인
* 딥페이크를 통한 움직이는 사진 생성
* AWS S3에 이미지 저장
* 게시판 페이지네이션
* 바닐라 JS로 구현한 방 꾸미기 기능
    * 가구 상점에서 coin으로 가구 구매 가능

<br/>

# Project
---
* [`🔗Github - backend`](https://github.com/cmjcum/WM_back)
* [`🔗Github - frontend`](https://github.com/cmjcum/WM_front)
* [`🔗Starting Assignment (tistory)`]()

## 프로젝트 기간
2022-07-07 ~ 2022-08-16

<br/>

## 팀 구성 및 역할

| 이름 | 역할 | 깃허브 |
|:----------|:----------|:----------:|
| **이정아&nbsp;&nbsp;&nbsp;&nbsp;** | 시민증 발급 페이지 | [`🔗zeonga1102`](https://github.com/zeonga1102)|
| **노을🌱** |게시판 페이지 | [`🔗minkkky`](https://github.com/minkkky) |
| **이현경** | 로그인 및 회원가입 페이지, AWS 배포&nbsp;&nbsp;&nbsp;&nbsp; | [`🔗LULULALA2`](https://github.com/LULULALA2)|
| **김동근** | 마이 페이지 | [`🔗yinmsk`](https://github.com/yinmsk) |

<br/>

## 스킬 및 사용툴
`Python`, `Django`, `DjangoRestFramwork`

<br/>

## 나의 역할

### API 설계
1. `Goal` 처음에는 url은 최소로 적고, method의 종류에 따라 다른 동작을 하는 방식으로 진행하려고 했다. 
1. `Problem` 하지만 실제로 동작하는 것을 고려해보니 url의 가독성이 너무 떨어졌다.
1. `Action` 어떤 method를 써서 어떤 동작을 하는 url인지 바로 알 수 있도록 형태를 정리했다.

### 게시판 페이지의 백엔드  
1. `Goal` 이미지 파일은 S3에 올리고 db에는 url만 저장하기
1. `Problem` 띄어쓰기가 들어있는 경우도 있고, 파일명이 중복되는 경우 등 파일명을 그대로 사용하여 업로드했을 때 url을 사용하기 어려운 문제가 있었다.
1. `Action` 업로드할 때 파일명을 따로 만들어주었다.  
현재 시각을 초 단위까지 받아 파일명으로 쓰고, 작성자의 id도 넣어 혹시라도 여러 명이 동시에 글을 작성했을 때에도 파일명이 중복되는 문제가 없도록 했다.
1. `Problem` 코드를 작성하고 form data로 글 제목, 글 내용, 파일을 전송해보니 db에 잘 저장되었으나, 이미지를 첨부하지 않았을 때는 오류가 발생했다. 게시글에 이미지 파일을 올리는 것이 필수가 아니기 때문에 이에 대한 처리가 필요했다.
1. `Action`   date에서 년월/날짜 값을 뽑아낸 후 sort()를 이용하여 년월 값으로는 내림차순 정렬을 하고, 날짜 값으로는 오름차순 정렬을 하는 `다중조건`으로 정렬하여 해결했다.

### 게시판 페이지의 프론트엔드
1. `Goal` jinja2 문법을 사용하여 데이터 출력하기
1. `Problem` 서버에서 받아온 데이터는 딕셔너리와 리스트가 복합된 형태로, key값과 item값을 둘 다 사용하는 방법을 몰랐다.
1. `Action` for문과 `items()` 함수를 사용하여 출력했다.

<br/>

## 회고
>